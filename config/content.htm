<h1>Introduction</h1>
<p><span>GroupÂ website:Â </span><a href="https://a40823112.github.io/stage2-ag1/content/index.html">stage2-ag1</a></p>
<p><span>Group<span>Â </span><span>repository</span><span>Â </span>:<span>Â </span></span><a href="https://github.com/a40823112/stage2-ag1">stage2-ag1</a></p>
<p><span>Group<span>Â </span><span>Heroku</span><span>Â </span>:<span>Â </span></span><a href="https://dashboard.heroku.com/apps/stage2-ag1">stage2-ag1</a></p>
<h1>Work Distribution</h1>
<p><a href="https://40823108.github.io/cd2021/content/index.html">40823108</a>Â : <span>coppeliasim</span>ç¨‹å¼ç·¨å¯«èˆ‡æ¨¡æ“¬ã€pdfå ±å‘Šè£½ä½œã€é›¶ä»¶ç¹ªåœ–</p>
<p><a href="https://40823109.github.io/cd2021/content/index.html">40823109</a>Â :<span>é›¶ä»¶ç¹ªåœ–</span></p>
<p><a href="https://a40823112.github.io/cd2021/content/index.html">40823112</a>Â :<span>coppeliasim</span><span>ç¨‹å¼ç·¨å¯«èˆ‡æ¨¡æ“¬ã€å°çµ„å€‰å„²ç¶²ç«™ç·¨è¼¯ã€revealå ±å‘Šè£½ä½œ</span></p>
<p><a href="https://40823145.github.io/cd2021/content/index.html">40823145</a>Â :<span>å°çµ„å€‰å„²ç¶²ç«™ç·¨è¼¯</span></p>
<h1>Cooperation</h1>
<p>å”åŒè¨­è¨ˆèˆ‡ç‰ˆæ¬¡ç®¡ç†èƒ½å¤ æœ‰æ•ˆæå‡åœ˜éšŠå·¥ä½œæ•ˆç‡ï¼Œé™ä½å…§å®¹äº’ç›¸è¦†è“‹ï¼Œæœ€çµ‚é€ æˆç„¡æ³•è¾¨è­˜æ˜¯èª°æ›´æ”¹å…§å®¹çš„æƒ…æ³ã€‚</p>
<p></p>
<p>é ˜å°ä¸»å¹¹è¨­ç«‹é …ç›®Projectæ‰€éœ€ç›®æ¨™è¦æ±‚ï¼Œä¸»å°è‡³æœ€çµ‚å®Œæˆï¼Œå”ä½œè€…åˆ†æ”¯Branchç”±ä¸»å¹¹åˆ†é…è² è²¬å·¥ä½œå€æˆ–è¡ç”Ÿä¸åŒè¨­è¨ˆï¼Œå„åˆ†æ”¯çš†é”åˆ°ç›®æ¨™éœ€æ±‚å¾Œåˆä½µå›ä¸»å¹¹ï¼Œæ–¹èƒ½ç”Ÿç”¢é …ç›®ã€‚</p>
<p></p>
<p>å› å”ä½œè€…çš„å·¥ä½œèˆ‡å…§å®¹æ›´å‹•çš†åœ¨ç¨ç«‹åˆ†æ”¯æ¸…æ¸…æ¥šæ¥šï¼Œè²¬ä»»æ­¸å±¬çš„ä¹Ÿå°±ä¸€ç›®äº†ç„¶ã€‚</p>
<p>åˆ†æ”¯å‡ºä¾†çš„è¨­è¨ˆï¼Œåœ¨æœ¬æ¬¡ç›®æ¨™ä¸éœ€è¦ï¼Œæˆ–è¨±æœªä¾†çš„é …ç›®å¯ä»¥ç”¨ä¸Šã€‚å¯ä»¥é¿å…æ‰ã€Œç•¶åˆåšéï¼Œä½†æ”¹æ‰äº†ï¼Œé€™æ¬¡åˆè¦é‡åšã€é€™ç¨®äº‹æƒ…ç™¼ç”Ÿ</p>
<p><img alt="" height="673" src="/images/Untitled Diagram-3.png" width="924"/></p>
<p>çµ„é•·åœ¨å€‰å„²Setting-&gt;Manage access-&gt;Invite a collaboratoé‚€è«‹å”ä½œè€…</p>
<p>çµ„å“¡åœ¨è‡ªå·±å€‰å„²ä¸­Setting-&gt;Manage access-&gt;Invite a collaboratoçµ„é•·(çµ„å“¡ä¸ç”¨äº’é‚€)</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">git clone --recurse-submodules https://github.com/a40823112/stage2-ag1.git stage2-ag1 (cloneçµ„é•·å€‰å„²)
cd stage2-ag1
git remote add 40823145 https://github.com/40823145/stage2-ag1.git (addè‡ªå·±å€‰å„²)
</pre>
<h1>Weekly progress</h1>
<h2>W6</h2>
<p>åˆ†çµ„è¨è«–å®Œï¼Œæ±ºå®šStage2çš„<span>ç”¢å“è¨­è¨ˆå…§å®¹ï¼Œç‚ºStage1-ag1çš„ç”¢å“é€²è¡Œæ”¹è‰¯ï¼Œä¸¦æ–°å¢å…¶å®ƒåŠŸèƒ½:</span></p>
<p><em><strong>1.åˆ©ç”¨éµç›¤æ–¹å‘éµæ“æ§</strong></em></p>
<p><em><strong>2.å¢åŠ æ¥è¿‘å‚³æ„Ÿå™¨ä½¿ç”¢å“è‡ªå‹•è¡Œèµ°æ™‚ï¼Œä¸æœƒæ’åˆ°éšœç¤™ç‰©</strong></em></p>
<p><em><strong><img alt="" height="315" src="/images/EV3-6.jpg" width="560"/></strong></em></p>
<h2>W7Â Keyboard Control</h2>
<p><strong>åˆ©ç”¨éµç›¤æ“æ§ç‰©é«”è¡Œèµ°</strong></p>
<p>(<span>ğŸ”½ç¨‹å¼ç¢¼</span>)</p>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init() 
    left_front_handle= sim.getObjectHandle('left_m')
    left_back_handle= sim.getObjectHandle('left_m')
    right_back_handle= sim.getObjectHandle('right_m')
    right_front_handle= sim.getObjectHandle('right_m')
    MaxVel=2
    leftvelocity=0
    rightvelocity=0
    dVel=0.5;
    --sim.setJointTargetVelocity(left_front_handle,leftvelocity)
    sim.setJointTargetVelocity(left_back_handle,leftvelocity)
    sim.setJointTargetVelocity(right_back_handle,rightvelocity)
    --sim.setJointTargetVelocity(right_front_handle,rightvelocity)
end

function sysCall_actuation() 
    message,auxiliaryData=sim.getSimulatorMessage()
    while message~=-1 do
        if (message==sim.message_keypress) then
            if (auxiliaryData[1]==32) then
                -- right key
                leftvelocity=0
                rightvelocity=0
                sim.setJointForce(left_front_handle, 0)
                sim.setJointForce(left_back_handle, 0)
                sim.setJointForce(right_back_handle, 0)
                sim.setJointForce(right_front_handle, 0)
                break
            else
                --sim.setJointForce(left_front_handle, 10000)
                sim.setJointForce(left_back_handle, 10000)
                sim.setJointForce(right_back_handle, 10000)
                --sim.setJointForce(right_front_handle, 10000)
            end
            if (auxiliaryData[1]==2007) then
                -- up key
                leftvelocity=(leftvelocity+rightvelocity)/2
                rightvelocity=leftvelocity
                leftvelocity=leftvelocity+dVel
                rightvelocity=rightvelocity+dVel
            end
            if (auxiliaryData[1]==2008) then
                -- down key
                leftvelocity=(leftvelocity+rightvelocity)/2
                rightvelocity=leftvelocity
                leftvelocity=leftvelocity-dVel
                rightvelocity=rightvelocity-dVel
            end
            if (auxiliaryData[1]==2009) then
                -- left key
                leftvelocity=leftvelocity-dVel
                rightvelocity=rightvelocity+dVel
            end
            if (auxiliaryData[1]==2010) then
                -- right key
                leftvelocity=leftvelocity+dVel
                rightvelocity=rightvelocity-dVel
            end
        end
        message,auxiliaryData=sim.getSimulatorMessage()
    end
    
    if leftvelocity&gt;MaxVel then
        leftvelocity=MaxVel
    end
    if leftvelocity&lt;-maxvel then="" leftvelocity="-MaxVel" end="" if="" rightvelocity=""&gt;MaxVel then
                rightvelocity=MaxVel
    end
    if rightvelocity&lt;-maxvel then="" rightvelocity="-MaxVel" end="" --sim="" setjointtargetvelocity="" left_front_handle="" leftvelocity="" sim="" setjointtargetvelocity="" left_back_handle="" leftvelocity="" sim="" setjointtargetvelocity="" right_back_handle="" rightvelocity="" --sim="" setjointtargetvelocity="" right_front_handle="" rightvelocity="" end="" pre=""&gt;<!---maxvel--><!---maxvel--></pre>
<p><strong><mark></mark></strong></p>
<h3>æ¨¡æ“¬å•é¡Œèˆ‡æ’è§£</h3>
<p><strong>å•é¡Œ:</strong> ç•¶æœ¬é«”é–‹å•Ÿé‹å‹•æ¨¡æ“¬æ™‚æœƒç”¢ç”ŸéŒ¯èª¤ï¼Œå°è‡´ç”¢å“è§£é«”</p>
<p><img alt="" height="325" src="/images/HnHbWHruYE.gif" width="600"/></p>
<p><strong></strong></p>
<p><strong>å•é¡ŒåŸå› :</strong> è¨è«–å¾Œç™¼ç¾ï¼Œç”¢å“çš„æ¨¡æ“¬å¹²æ¶‰å¤ªå¤šä½¿å…¶ç„¡æ³•æ­£å¸¸é‹ä½œï¼ŒåŸå› æ˜¯ç”¢å“çš„è¼ªå­è·Ÿçƒé«”ä¸Šä¸¦ä¸æ˜¯å®Œæ•´çš„åœ“ï¼Œè€Œæ˜¯ç”±è¨±å¤šæ­£æ–¹å½¢çš„å°æ ¼å­æ‰€æ§‹æˆï¼Œæ‰€ä»¥åœ¨æ¨¡æ“¬æ™‚ç”¢ç”Ÿéå¤šçš„å¹²æ¶‰å½±éŸ¿é›»è…¦æ­£å¸¸æ¨¡æ“¬ï¼Œå› è€Œæ¨¡æ“¬éŒ¯èª¤ã€‚</p>
<p><img alt="" height="523" src="/images/è¼ªå­æ”¹å–„.jpg" width="600"/></p>
<p><strong></strong></p>
<p><strong>å•é¡Œæ’è§£:</strong><span><span>Â åœ¨coppeliasimå…§ add-&gt;primitive shape-&gt;Cylinder å¢æ·»ç°¡åŒ–åœ–å½¢ä¾†ä»£æ›¿åŸæœ¬çš„è»Šè¼ªï¼Œè€ŒåŸæœ¬çš„è¼ªå­å°±åšç‚ºDiscçš„é€ å‹ã€‚</span></span></p>
<p><span><span><img alt="" height="392" src="/images/w7æ”¹å–„.jpg" width="400"/></span></span></p>
<p><span><span><img alt="" height="125" src="/images/w7æ”¹å–„æ’åˆ—.jpg" width="200"/></span></span></p>
<p><span><span><img alt="" height="701" src="/images/w7æ”¹å–„skin.jpg" width="600"/></span></span></p>
<h2>W8 Sensor Control</h2>
<p><strong>å¢åŠ æ¥è¿‘å‚³æ„Ÿå™¨ä½¿ç”¢å“è‡ªå‹•è¡Œèµ°æ™‚ï¼Œä¸æœƒæ’åˆ°éšœç¤™ç‰©</strong></p>
<p>(<span>ğŸ”½ç¨‹å¼ç¢¼</span>)</p>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    
    
end

function sysCall_actuation()
    
end

function sysCall_sensing()
    
end

function sysCall_cleanup()
    
end



function sysCall_afterDelete(inData)
    for key,value in pairs(inData.objectHandles) do
        print("Object with handle "..key.." was deleted")
    end
    
end

function sysCall_afterCreate(inData)
    for key,value in pairs(inData.objectHandles) do
        print("Object with handle "..value.." was created")
    end
end
--]]
function speedChange_callback(ui,id,newVal)
    speed=minMaxSpeed[1]+(minMaxSpeed[2]-minMaxSpeed[1])*newVal/100
end

function sysCall_init()
    
    bubbleRobBase=sim.getObjectAssociatedWithScript(sim.handle_self) 
    leftMotor=sim.getObjectHandle("bubbleRob_leftMotor") 
    rightMotor=sim.getObjectHandle("bubbleRob_rightMotor") 
    noseSensor=sim.getObjectHandle("bubbleRob_sensingNose") 
    minMaxSpeed={120*math.pi/180,300*math.pi/180} 
    backUntilTime=-1 
   
        xml = '<ui activate="false" closeable="false" resizeable="false" title="'..sim.getObjectName(bubbleRobBase)..' speed">'..[[
        <hslider id="1" maximum="100" minimum="0" onchange="speedChange_callback"></hslider>
        <label style="* {margin-left: 300px;" text=""></label>
        </ui>
        ]]
    ui=simUI.create(xml)
    speed=(minMaxSpeed[1]+minMaxSpeed[2])*1
    simUI.setSliderValue(ui,1,100*(speed-minMaxSpeed[1])/(minMaxSpeed[2]-minMaxSpeed[1]))
end

function sysCall_actuation()
    result=sim.readProximitySensor(noseSensor) 
    
    if (result&gt;0) then backUntilTime=sim.getSimulationTime()+4 end 

    if (backUntilTime&lt;sim.getSimulationTime()) then
        
        sim.setJointTargetVelocity(leftMotor,speed)
        sim.setJointTargetVelocity(rightMotor,speed)
    else
        
        sim.setJointTargetVelocity(leftMotor,-speed/5)
        sim.setJointTargetVelocity(rightMotor,-speed/200)
    end
end

function sysCall_cleanup()
	simUI.destroy(ui)
end
</pre>
<h3>Sensoræ¨¡æ“¬å•é¡Œèˆ‡æ’è§£</h3>
<p><strong>å•é¡Œ:</strong>ç¨‹å¼èˆ‡æ„Ÿæ¸¬å™¨éƒ½ç¢ºèªç„¡èª¤å¾Œï¼Œå»é‚„æ˜¯ç„¡æ³•åšå‹•ã€‚</p>
<p></p>
<p></p>
<p><strong>å•é¡ŒåŸå› :</strong>èˆ‡çµ„å“¡è¨è«–å¾Œç™¼ç¾ï¼Œ<span>ç¨‹å¼èˆ‡æ„Ÿæ¸¬å™¨éƒ½æ²’æœ‰ç™¼ç”Ÿå•é¡Œï¼Œä¸æœƒåšå‹•çš„åŸå› æ˜¯ä¸èƒ½åªåŠ æ¥è¿‘å‚³æ„Ÿå™¨ï¼Œé‚„éœ€å¢åŠ è¦–è¦ºå‚³æ„Ÿå™¨ï¼Œæ‰èƒ½ç¹¼çºŒåšå‹•ã€‚</span></p>
<p><span>Â </span></p>
<p><span></span></p>
<p><strong>å•é¡Œæ’è§£:</strong>åœ¨<span>coppeliasimå…§ add-&gt;Vision sensor-&gt;Perspective typeï¼Œæ–°å¢ä¸€å€‹å‚³æ„Ÿå™¨ä¸¦ä¿®æ”¹åƒæ•¸ï¼Œå°‡å…¶ç§»è‡³æ¨¡æ“¬ç‰©ä»¶å…§ï¼Œç‰©ä»¶å°±å¯æ­£å¸¸æ¨¡æ“¬åšå‹•ã€‚</span></p>